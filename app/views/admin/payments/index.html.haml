%h2#title 
  =t :billing_and_payment
#action-links
  %ul
=render partial:"shared/noscript"
=render partial:"shared/upgrade_ie"
%h4 
  =t :payment_gateway
%p.description
  =t :payment_gateway_description
  = succeed "." do
    =link_to t(:click_here),faq_path
.pgroup
  =render 'alipay'
  =render 'tenpay'
  #custom-payment-methods.payment-service-provider
    %table
      %tr
        %td.fl{:style => "padding:10px;width:225px"}=image_tag 'admin/icons/custom_payment_method.gif'
        %td
          %table.desc
            %tr
              %td.r 
                =t :payment
              %td.meta
                %strong 
                  =t :common_payment
            %tr
              %td.r 
                =t :description
              %td.meta 
                =t :payment_description
    %dl#manual_payment_gateways.cl.sst{:style => "padding: 0px 0 0 0px;margin-bottom: 0; border-top: 1px solid #ddd"}
      =render partial:'custom-payment'
      %dt.nst{:style => "padding: 10px 0 10px 10px;"}
        %select#select_custom_payment_method{:name => "", :style => "width: 300px;"}
          %option(value= "") 
            =t :select_the_payment_method_to_increase_general
          =options_for_select  custom_types
      %dd#account_manual_payment_gateway.nsb{:style => "display:none;border-top: 1px solid #ddd"}
        =form_for payment, html:{id: 'new_custom_payment', onsubmit: 'return false'} do |f|
          .group-fields
            .sb
              =f.label :name
              %p.credential=f.text_field :name
            .sb
              %label{:for => "message_manual_payment_gateway"}
                %span.hint When a customer checkoutï¼ŒThe following tips will be presented to the customer
              %p.credential
                =f.text_area :message, cols: 40,rows: 10
          .group-actions
            =f.submit w('save'),class: 'btn'
            =w('or')
            =link_to w('cancel'),'#',id:'cancel_custom_payment_form'
          / .group-actions
#checkout-configuration
  =form_for shop, html:{id:'checkout-config', onsubmit: 'return false'} do |f|
    .group
      .group-fields
        %h3.l{:style => "color: #999;font-size: 18px; font-weight: normal; margin: 5px"} 
          =t :customer_payment_settings
        #customer-accounts
          %h5.note.st 
            =t :customer_payment_setting_affecting
          .st.sb.sl
            %ul.nobull
              %li
                =f.radio_button :customer_accounts,''
                %label{:for => "shop_customer_accounts_"}
                  =t :no_registration_required
                  %span.hint 
                  =t :no_customer_registration_function
              %li
                =f.radio_button :customer_accounts,'optional'
                %label{:for => "shop_customer_accounts_optional"}
                  =t :optional_registration
                  %span.hint 
                    =t :user_selectable_landing
              %li
                =f.radio_button :customer_accounts,'required'
                %label{:for => "shop_customer_accounts_required"}
                  =t :must_be_registered
                  %span.hint
                    =t :users_must_register_in_order_to_pay
          #customer-accounts-required.message{:style => "margin:15px 0 0 0; display:none;"}
            %p Customers only after the registered account to order
      / .group-fields
      .group-actions
        %input.btn#checkout{:name => "commit", :type => "submit", :value => t(:save)}/
      / .group-actions
    / .group
/ checkout config
.group
  =render partial: 'policy'

:javascript
  App.custom_payments = new App.Collections.Payments();
  App.custom_payments.refresh(#{custom_payments.to_json(except: [:created_at,:updated_at])})

  App.payment_alipay = new App.Models.Payment(#{payment_alipay_json});
  App.payment_tenpay = new App.Models.Payment(#{payment_tenpay_json});

  new App.Views.Payment.Index({collection: App.custom_payments})

  task_name = 'setup_payment_gateway'
